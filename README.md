
# Foodies Backend

## Встановлення та запуск

1. Клонуйте репозиторій:
<git clone https://github.com/lDirtyl/foodies_back> 

npm install

npm install cloudinary

npm start
або
node server.js

Сервер буде доступним по адресу http://localhost:3000 (чи по вашому порту).

для тесту можна використати
npm install express-list-endpoints

### Техническое задание

#### Backend
- [ ] Настроить сервер для разработки (подключить модули, настроить CORS, написать функцию для обработки ошибок и т.д.)
- [x] Обработать структуру, инициализировать и подключить БД к проекту
- [ ] Создать swagger-документацию эндпоинтов (необязательное задание)

#### Users
- [x] Создать публичный эндпоинт регистрации пользователя
- [x] Создать публичный эндпоинт логинизации пользователя
- [x] Написать прослойку авторизации
- [x] Создать приватный эндпоинт на получение информации про поточного пользователя
- [x] Создать приватный эндпоинт на получение детальной информации про пользователя
- [x] Создать приватный эндпоинт для обновления аватара авторизованного пользователя
- [x] Создать приватный эндпоинт для получения информации о подписчиках пользователя
- [x] Создать приватный эндпоинт для получения информации о подписках пользователя
- [x] Создать приватный эндпоинт для добавления пользователя в перечень подписок
- [x] Создать приватный эндпоинт для удаления пользователя из перечня подписок
- [x] Создать приватный эндпоинт для логаута пользователя

#### Categories
- [x] Создать публичный эндпоинт для получения списка категорий рецептов

#### Areas
- [x] Создать публичный эндпоинт для получения списка регионов происхождения блюд

#### Ingredients
- [x] Создать публичный эндпоинт для получения списка ингредиентов

#### Testimonials
- [x] Создать публичный эндпоинт для получения списка отзывов

#### Recipes
- [x] Создать публичный эндпоинт для поиска рецептов по категории, ингредиентам и региону происхождения (с пагинацией)
- [x] Создать публичный эндпоинт для получения детальной информации про рецепт по его id
- [x] Создать публичный эндпоинт для получения популярных рецептов
- [x] Создать приватный эндпоинт для добавления собственного рецепта
- [x] Создать приватный эндпоинт для получения собственных рецептов
- [x] Создать приватный эндпоинт для удаления собственного рецепта
- [x] Создать приватный эндпоинт для добавления рецепта в список избранных
- [x] Создать приватный эндпоинт для удаления рецепта из списка избранных
- [x] Создать приватный эндпоинт для получения списка избранных рецептов

#### Frontend
- [x] Соединить форму создания рецепта с бекендом
- [x] Реализовать загрузку изображения на Cloudinary
- [x] Реализовать получение категорий и ингредиентов с бекенда для селектов в форме
- [x] Реализовать отправку данных формы на эндпоинт `POST /api/recipes`
- [x] Реализовать обработку ответа от сервера и навигацию

Ендпоїнти:

### Users (`/api/users`)
- `POST /register` - Регистрация нового пользователя.
- `POST /login` - Вход пользователя.
- `POST /logout` - Выход пользователя (требуется аутентификация).
- `GET /current` - Получение данных текущего пользователя (требуется аутентификация).
- `PATCH /avatar` - Обновление аватара пользователя (требуется аутентификация, ожидает `multipart/form-data` с полем `avatar`).
- `GET /followers` - Получение списка подписчиков (требуется аутентификация).
- `GET /followings` - Получение списка подписок (требуется аутентификация).
- `POST /follow` - Подписаться на пользователя (требуется аутентификация).
- `DELETE /follow` - Отписаться от пользователя (требуется аутентификация).
- `GET /:userId/details` - Получение детальной информации о пользователе (требуется аутентификация).

### Recipes (`/api/recipes`)
- `GET /` - Поиск рецептов с фильтрацией и пагинацией (query params: `keyword`, `category`, `area`, `ingredient`, `page`, `limit`).
- `POST /` - Создание нового рецепта (требуется аутентификация, ожидает `multipart/form-data`).
- `GET /popular` - Получение списка популярных рецептов.
- `GET /my` - Получение рецептов, созданных текущим пользователем (требуется аутентификация).
- `GET /favorites` - Получение избранных рецептов текущего пользователя (требуется аутентификация).
- `GET /:id` - Получение детальной информации о рецепте по ID.
- `DELETE /:id` - Удаление рецепта по ID (требуется аутентификация, только владелец).
- `POST /:id/favorite` - Добавление рецепта в избранное (требуется аутентификация).
- `DELETE /:id/favorite` - Удаление рецепта из избранного (требуется аутентификация).

### Other
- `GET /api/categories` - Получение списка всех категорий.
- `GET /api/areas` - Получение списка всех регионов.
- `GET /api/ingredients` - Получение списка всех ингредиентов.
- `GET /api/testimonials` - Получение списка отзывов с пагинацией.


Лог дій:
- Реализована загрузка изображений для рецептов через Cloudinary.
- Фронтенд-форма создания рецепта обновлена для отправки изображений и данных на бекенд.
- Реализована навигация на страницу рецепта после его создания.
- Подключены фронтенд-формы регистрации и логина к соответствующим эндпоинтам.

